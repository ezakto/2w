!function(a){"use strict";function l(){f.manual||a.$2w.initialize()}function m(a,b){var c,d,e,f,j,k;if(a===b)return!0;if(j=typeof a,k=typeof b,j!==k||j!==g.func&&j!==g.object&&k!==g.func&&k!==g.object&&a!==b)return!1;if(j=i.call(a),k=i.call(b),j!==k)return!1;if(j===h.array){if((d=a.length)!==b.length)return!1;for(c=0;d>c;c++)if(!m(a[c],b[c]))return!1}else if(j===h.object){d=0;for(f in a)if(d++,!m(a[f],b[f]))return!1;e=0;for(f in b)e++;if(d!==e)return!1}return!0}function n(a){var b,c,d,e,f;if(e=typeof a,null===a||e!==g.object)return a;if(e=i.call(a),e===h.array)for(f=[],b=0,d=a.length;d>b;b++)f.push(n(a[b]));else if(e===h.object){f={};for(c in a)f[c]=n(a[c])}return f}function o(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}var b=a.document,c={},d=[],e=!0,f={controllerAttr:"data-controller",formModelAttr:"data-model",clickAttr:"data-click",expressionStart:"{{",expressionEnd:"}}",interval:50,manual:!1},g={object:"object",array:"object",func:"function",undef:"undefined"},h={object:"[object Object]",array:"[object Array]",func:"[object Function]"},i=Object.prototype.toString,j={modelGet:{nodeType:1,event:"digest",test:function(a){return"INPUT"===a.nodeName||"TEXTAREA"===a.nodeName},cb:function(a,c){a!==b.activeElement&&(a.value=k.expression.call(c,a.getAttribute(f.formModelAttr)))}},modelSet:{nodeType:1,event:"keypress keyup",test:function(a){return"INPUT"===a.nodeName||"TEXTAREA"===a.nodeName},cb:function(a,b,c){c.$scope[b.getAttribute(f.formModelAttr)]=b.value}},click:{nodeType:1,event:"click",test:function(a){return a.hasAttribute(f.clickAttr)},cb:function(a,b,c){a.preventDefault(),k.expression.call(c,b.getAttribute(f.clickAttr))}}},k=function(){this.fn=k.prototype,this.config=f,this.events=j};k.prototype.initialize=function(){var a=this,c=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;f._expre=new RegExp(f.expressionStart.replace(c,"\\$&")+"(.*?)"+f.expressionEnd.replace(c,"\\$&")),a.traverse(b.documentElement),d.forEach(function(b){var c=b[0];c.apply(null,b.slice(1).map(function(b){return a._controller(b).$scope}))}),a.digest()},k.prototype.traverse=function(a){var d,e,g,b=this;if(1===a.nodeType&&a.hasAttribute(f.controllerAttr)&&(g=a.getAttribute(f.controllerAttr),c[g]=b._attachController(a,g)),a.hasChildNodes())for(d=0,e=a.childNodes.length;e>d;d++)b.traverse(a.childNodes[d])},k.prototype._controller=function(a,b){var e;return typeof b===g.undef?c[a]||(c[a]={_scope:{},$scope:{},dic:{},org:{},tmp:{}}):(e=a.split(/\s+/),e.unshift(b),d.push(e),k)},k.prototype.controller=function(a,b){return typeof b===g.undef?this._controller(a).$scope:this._controller(a,b)},k.prototype._attachController=function(a,b,c){var e,h,i,k,l,d=this;if(typeof b!==g.object&&(b=d._controller(b)),c&&(b.force=!0),1===a.nodeType&&a.hasAttributes())for(e=0,h=a.attributes.length;h>e;e++)d._attachController(a.attributes[e],b);if(1===a.nodeType&&a.hasChildNodes())for(e=0,h=a.childNodes.length;h>e;e++)d._attachController(a.childNodes[e],b);k=Math.random();for(i in j)j[i].nodeType===a.nodeType&&j[i].test(a)&&function(c){var d=function(d){j[c].cb.call(a,d,a,b)};j[c].event.split(" ").forEach(function(b){o(a,b,d)}),b.dic[k]=a}(i);return 2===a.nodeType?(l=a.value.search(f._expre),-1!==l&&(b.org[k]=a.value,b.dic[k]=a)):3===a.nodeType&&(l=a.nodeValue.search(f._expre),-1!==l&&(b.org[k]=a.textContent||a.nodeValue,b.dic[k]=a)),b},k.prototype.attachController=function(a,b){return this._attachController(a,b,!0).$scope},k.prototype.render=function(a){var c,d,e;for(d in a.dic){c=a.dic[d];for(e in j)"digest"===j[e].event&&j[e].nodeType===c.nodeType&&j[e].test(c)&&j[e].cb.call(c,c,a);if(2===c.nodeType||3===c.nodeType)for(a.tmp[d]||(a.tmp[d]=a.org[d]);-1!==a.tmp[d].search(f._expre);)a.tmp[d]=a.tmp[d].replace(f._expre,function(b,c){return k.expression.call(a,c)})}for(d in a.dic)c=a.dic[d],2===c.nodeType?c.value=a.tmp[d]:3===c.nodeType&&(c.textContent?c.textContent=a.tmp[d]:c.nodeValue=a.tmp[d]);return a.tmp={},a},k.prototype.digest=function(){var d,g,a=this;if(e){e=!1;for(d in c)g=c[d],(g.force||!m(g.$scope,g._scope))&&(a.render(g),g._scope=n(g.$scope),g.force=!1);f.manual||setTimeout(function(){a.digest()},f.interval),e=!0}},k.expression=function(a,b){var c,d;try{d=new Function("with (this.$scope) { return ("+a+"); }"),c=d.call(b||this),(null===c||typeof c===g.undef)&&(c="")}catch(e){c=""}return c},a.$2w=new k,b.addEventListener&&b.addEventListener("DOMContentLoaded",l,!1),b.attachEvent&&b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&l()}),!Array.prototype.forEach&&(Array.prototype.forEach=function(a,b){var c,d;for(c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)}),!Array.prototype.map&&(Array.prototype.map=function(a,b){var c=[];return this.forEach(function(d,e){c.push(a.call(b,d,e))}),c})}(window);